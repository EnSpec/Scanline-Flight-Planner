<!DOCTYPE html>
<html>
<head>
    <meta name="encoding" value="utf-8">
    <script type="text/javascript" src="js/jquery-3.2.0.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/underscore-min.js"></script>

    <link href="css/style.css" rel="stylesheet" type="text/css">
    <link href="css/jquery-ui.min.css" rel="stylesheet" type="text/css">
    <title>PushBroom Planner</title>
</head>
<body>
    <div id="darken">
    </div>
    <div id="settings-help" style="margin:5px">
        <div style="padding-top:5px">
            <h4>Settings Help</h4>
        </div>
        <table style="width:100%">
          <tbody>
              <tr>
                  <td>
                      <p>The Flight Settings Panel contains configuration options for the flight vehicle,
                      and location, as well as display units.
                      </p>
                      <p>
                      <strong>Vehicle</strong> 
                      can be specified as either Full-Scale or Quadcopter. Quadcopter mode displays the 
                      flight path as a continuous line, and allows you to set a takeoff/landing location.
                      Full-Scale airplane mode displays the flight path as a series of straight lines.
                      </p>
                      <p>
                      <strong>Location</strong> 
                      is identical in functionality to the Google Earth search bar, and
                      can be used to quickly find locations on the map.
                      </p>
                      <p>
                      <strong>Units</strong> can be specified as either US (feet, miles, knots), 
                      or metric (meters, kilometers, meters per second)
                      </p>
                  </td>
              </tr>
          </tbody>
        </table>
    </div>
    
    <div id="spectrometer-help" style="margin:5px">
        <div style="padding-top:5px">
            <h4>Spectrometer Help</h4>
        </div>
        <table style="width:100%">
          <tbody>
              <tr>
                  <td>
                      <p>The Spectrometer Panel contains configuration options for the flight spectrometer.
                      </p>
                      <p>
                      <strong>FOV</strong> specifies the lateral field of view for the spectrometer. 
                      </p>
                      <p>
                      <strong>Cross-FOV</strong>
                      specifies the cross field of view for the spectrometer. This, 
                      along with the Frame parameter, is used to determine the 
                      flight velocity in <strong>Flight Stats</strong>. Flight velocity is given
                      such that the scan will produce square pixels.
                      </p>
                      <p>
                      <strong>Pixels</strong> is the number of scan line pixels for the spectrometer.
                      </p>
                      <p>
                      <strong>Frame</strong> is the duration of a single scan. It is used to determine the
                      flight velocity (see Cross-FOV). Spectrometers usually support a range of scan durations.
                      </p>
                      <strong>Presets</strong> Can be used to select from a number of known spectrometers.
                      The other fields in the panel will be updated to reflect your choice.
                      </p>
                  </td>
              </tr>
          </tbody>
        </table>
    </div>

    <div id="parameters-help" style="margin:5px">
        <div style="padding-top:5px">
            <h4>Parameters Help</h4>
        </div>
        <table style="width:100%">
          <tbody>
              <tr>
                  <td>
                      <p>The Scan Parameters panel contains a variety of options to fine-tune your scan paths.
                      </p>
                      <strong>Altitude</strong> specifies the altitude above ground level that the flight
                      vehicle will fly. Higher altitudes result in wider scan pathsm and lower
                      spatial resolution.
                      </p>
                      <p>
                      <strong>Approach</strong>
                      specifies the distance beyond the actual scan area that the path will extend.
                      For a quadcopter, this can usually be set to a small value, but for an airplane
                      a larger value can give a pilot more time to align their flight path.
                      </p>
                      <p>
                      <strong>Bearing</strong> is the angle at which scan lines will pass through the scan
                      area. It is given relative to North.
                      </p>
                      <p>
                      <strong>Sidelap</strong> is the lateral overlap between scan paths.
                      </p>
                  </td>
              </tr>
          </tbody>
        </table>
    </div>

    <div id="stats-help" style="margin:5px">
        <div style="padding-top:5px">
            <h4>Stats Help</h4>
        </div>
        <table style="width:100%">
          <tbody>
              <tr>
                  <td>
                      <p>The Flight Stats panel contains computed metadata about your scan paths.
                      </p>
                      <strong>Distance</strong> is the sum of the length of the generated scan lines,
                      plus the distance from one scan line to the next.
                      </p>
                      <p>
                      <strong>Velocity</strong> is the velocity that the flight vehicle would need to
                      travel at to produce a scan with square pixels (such that the distance covered
                      during the duration of a single scan is the same as the lateral resolution of the
                      spectrometer). See the help page for <strong>Spectrometer</strong> for more
                      information on fine-tuning this parameter.
                      </p>
                      <p>
                      <strong>Pixel Size</strong> is the width of a single pixel on the ground. This is a 
                      function of the flight altitude and spectrometer resolution.
                      </p>
                      <p>
                      <strong>Duration</strong> is the time it would take the scan vehicle to travel the 
                      computed path at the computed velocity.
                      </p>
                  </td>
              </tr>
          </tbody>
        </table>
    </div>

    <div id="stats-help" style="margin:5px">
        <div style="padding-top:5px">
            <h4>Save Help</h4>
        </div>
        <table style="width:100%">
          <tbody>
              <tr>
                  <td>
                      <p>The Save Path panel contains options for saving your scan paths to 
                      other useful formats.
                      </p>
                      The <strong>Save</strong> and <strong>Load</strong> buttons can be used to save/load
                      your entire project from a shapefile. Using this feature, you can partially plan
                      out a flight path, save it, and then edit it again later.
                      </p>
                      <p>
                      <strong>Export As</strong> exports your scan path into formats that can be
                      read by other applications. <strong>GPX</strong> files can be loaded into a Garmin
                      GPS unit and used for navigation. <strong>SHP</strong> shapefiles can be viewed 
                      by a variety of GIS programs. <strong>Waypoint</strong> files can be loaded into 
                      APM Mission Planner and sent as instructions to a UAV.
                      </p>
                      <p><strong>Note:</strong> Paths saved via the export feature cannot be loaded back
                      into Pushbroom Planner. To keep a permanent, editable version of your path,
                      use the save feature.
                  </td>
              </tr>
          </tbody>
        </table>
    </div>

    <div id="draw-help" style="margin:5px">
        <div style="padding-top:5px">
            <h4>Drawing Help</h4>
        </div>
        <table style="width:100%">
          <tbody>
            <tr>
                <td style="width:33%"><h5>Adding a Scan Path</h5></td>
            </tr>
            <tr>
                <td>
                    <img style="width:100%;padding-bottom:5px" src="img/start_poly.png"/>
                </td>
                <td>
                    <p>After clicking <button>Draw Area</button>
                    , click on the map to place the vertices of your desired
                    scan area. Draw mode can also be entered via the pencil icon at the top-left
                    of the map.</p>
                </td>
            </tr>
            <tr>
                <td><h5>Modifying a Scan Path</h5></td>
            </tr>
            <tr>
                <td>
                    <img style="width:100%;padding-bottom:5px" src="img/one_poly.png"/>
                </td>
                <td>
                    <p>Click on the the starting vertex again to complete 
                    the area. It will be added to the <strong>Scan Paths</strong> menu,
                    where it can be renamed or deleted. Double click
                    on the map to begin placing another scan path.</p>
                </td>
            </tr>
            <tr>
                <td><h5>Completing a Scan Path</h5></td>
            </tr>
            <tr>
                <td>
                    <img style="width:100%;padding-bottom:5px" src="img/done.png"/>
                </td>
                <td>
                <p>Once you have added all desired scan areas,
                  click <button>Finish</button>. A flight path
                  will automatically be generated through the scan areas.
                  The route can be adjusted via the <strong>Scan Parameters</strong> menu.
                </p>
                </td>
            </tr>
          </tbody>
        </table>
          </div>
      </div>
    </div>
    <div class="menu" id="menubar">
        <a href='#' id="file-mbar" class='mbar-item'>File</a>
        <a href='#' id="edit-mbar" class='mbar-item'>Edit</a>
        <a href='#' id="view-mbar" class='mbar-item'>View</a>
        <a href='#' id="help-mbar" class='mbar-item'>Help</a>
    </div>
    <div class="menu mbar-drop" id="file-mbar-drop" >
        <p><a href='#'>Open Plan</a></p>
        <p><a href='#'>Save Plan As...</a></p>
    </div>
    <div class="menu mbar-drop" id="edit-mbar-drop" >
        <p><a href='#'>Change Display Units</a></p>
        <p><a href='#'>Add Scan Areas</a></p>
        <p><a href='#'>Remove Scan Areas</a></p>
    </div>
    <div class="menu mbar-drop" id="view-mbar-drop">
        <p><a href='#'>Zoom In</a></p>
        <p><a href='#'>Zoom Out</a></p>
        <p><a href='#'>Zoom Over Location...</a></p>
    </div>
    <div class="menu mbar-drop" id="help-mbar-drop">
        <p><a href='#'>Configuration Help</a></p>
        <p><a href='#'>Scan Parameters Help</a></p>
        <p><a id='show-draw-help' href='#'>Drawing Tools Help</a></p>
        <p><a href='#'>Scan Area Help</a></p>
    </div>
    <div id="map-panel">
        <div id="map"></div>
        <div class="on-map-icon" id="edit-btn">
            <a id='on-map-draw' href='#'>&#128393;</a>
            <a id='on-map-save' href='#'>&#128190;</a>
        </div>
    </div>
    <div id="poly-list-panel">
      <div class="content">
            <h4>Drawing Tools <a href='#' id='info-draw'>&#x1f6c8;</a></h4>
            <span><button id="start_draw"style="width:6em">Draw Area</button>
              <!--a id="summon_help" href='#'> (Help)<br></a-->
            </span>
            <h4>Save Path <a href='#' id='info-save'>&#x1f6c8;</a></h4>
	    <span>
              <button id="save_native"class="text-center" style="width:6em">Save</button>
              <button id="load"class="text-center" style="width:6em">Load</button>
	    </span>
	    <span><br>Export As:<br>
              <select id="fmt"style="width:100%">
                <option selected>GPX(Garmin)</option>
                <option>SHP (ESRI)</option>
                <option>Waypoints (APM)</option>
              </select>
	      <br>
	    </span>
            <button id="save"class="text-center" style="width:6em">Export</button>
            <h4>Scan Paths <a href='#' id='info-paths'>&#x1f6c8;</a></h4>
            <ul id="drawn-paths">

            </ul>
      </div>
    </div>
    <div id="control-panel">
        <h4>Flight Settings <a href='#' id='info-settings'>&#x1f6c8;</a></h4>
            <span>
                Vehicle:<br>
                <select id="vehicle"style="width:100%">
                    <option value="quadcopter">Quadcopter</option>
                    <option selected value="fullscale">Full-Scale Airplane</option>
                </select>
            <br></span>
            <span>
                Location:<br>
                <input id="pac-input" style="width:100%"class="controls" type="text" placeholder="Search Locations">
            <br></span>
            <span>
                Units:<br>
                <form>
                    <label><input id="us" type="radio" name="units" checked>US</label>
                    <label><input id="metric" type="radio" name="units">Metric</label>
                </form>
            </span>
            <h4>Spectrometer <a href='#' id='info-spectrometer'>&#x1f6c8;</a></h4>
            <table><tbody>
              <tr>
                <td>FOV (&deg;):</td>
                <td><input type="text" style="width:3em" id="fov" value=17></span></td>
              </tr>
              <tr>
                <td>Cross-FOV (&deg;):</td>
                <td><input type="text" style="width:3em" id="ifov" value=0.03></span></td>
              </tr>
              <tr>
                <td>Pixels (#):</td>
                <td><input type="text" style="width:3em" id="px" value=640></span></td>
              </tr>
              <tr>
                <td>Frame (ms):</td>
                <td><input type="text" style="width:3em" id="frame_pd"value=2></td>
              </tr>
            </tbody></table>
            <span>Presets:<br>
                <select id="spectrometer"style="width:100%">
                    <option selected>Custom</option>
                    <option>AVIRIS Classic</option>
                    <option>AVIRIS Next Gen</option>
                    <option >Headwall Nano Hyperspec</option>
                    <option>Headwall VNIR-SWIR co-boresi</option>
                    <option>Specim FENIX</option>
                    <option>Norsk Elektro Optikk HySpex</option>
                </select>
            <br></span>
            <h4>Scan Parameters <a href='#' id='info-parameters'>&#x1f6c8;</a></h4>
            <table><tbody>
            <tr>
                <td id="alt_label">Altitude (ft):</td>
                <td><input type="text" style="width:3em" id="alt"value=3000></span></td>
            </tr>
            <tr>
                <td id="appr_label">Approach (mi):</td>
                <td><input type="text" style="width:3em" id="overshoot"value=1></span></td>
            </tr>
            <tr>
                <td>Bearing (&deg;):</td>
                <td><input type="text" style="width:3em" id="bearing"value=45></td> 
            </tr>
            <tr>
                <td>Sidelap (%):</td><td><input type="text" style="width:3em" id="sidelap"value=20></td>
            </tr> 
            </tbody></table>
            <h4>Flight Stats <a href='#' id='info-stats'>&#x1f6c8;</a></h4>
            <table><tbody>
            <tr>
                <td id="dist_label">Distance (mi):</td>
                <td><span id="scan_len">0</span><span hidden id="scan_len_km"></span></td>
            </tr>
            <tr>
                <td id="speed_label">Velocity (kts):</td>
                <td> <span id="scan_speed">0</span>
                    <span hidden id="scan_speed_ms">0</span></td>
                
            </tr>
            <tr>
                <td id="px_label">Pixel Size (ft): </td>
		<td><span id="px_size">0</span><td>
            </tr>
            </table></tbody>
            <span style="padding-left:2px">
            Duration: <span id="scan_time">0:00:00</span>
            </span>
    </div>
    <script type="text/javascript" src="js/ui.js"></script>
    <script type="text/javascript" src="js/map.js"></script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?libraries=places,drawing&callback=initMap">
    </script>
  </body>
</html>
